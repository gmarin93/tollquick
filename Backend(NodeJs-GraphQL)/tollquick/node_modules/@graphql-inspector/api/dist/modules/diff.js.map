{"version":3,"file":"diff.js","sourceRoot":"","sources":["../../src/modules/diff.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA6C;AAC7C,gDAAmD;AACnD,2CAA8B;AAIjB,QAAA,QAAQ,GAAG,qBAAG,kbAAA,+WAsB1B,KAAC;AAEF,IAAM,KAAK,GAA6B;IAChC,IAAI,YAAC,CAAC,EAAE,IAAI;;;;;4BACe,qBAAM,OAAO,CAAC,GAAG,CAAC;4BAC/C,iBAAU,CAAC,IAAI,CAAC,SAAS,CAAC;4BAC1B,iBAAU,CAAC,IAAI,CAAC,SAAS,CAAC;yBAC3B,CAAC,EAAA;;wBAHI,KAAyB,SAG7B,EAHK,SAAS,QAAA,EAAE,SAAS,QAAA;wBAI3B,sBAAO,WAAI,CAAC,SAAS,EAAE,SAAS,CAAC,EAAC;;;;KACnC;CACF,CAAC;AAEW,QAAA,SAAS,GAAG;IACvB,KAAK,OAAA;CACN,CAAC","sourcesContent":["import {diff} from '@graphql-inspector/core';\nimport {loadSchema} from '@graphql-inspector/load';\nimport gql from 'graphql-tag';\n\nimport {QueryResolvers} from '../generated/graphql';\n\nexport const typeDefs = gql`\n  enum CriticalityLevel {\n    BREAKING\n    NON_BREAKING\n    DANGEROUS\n  }\n\n  type Criticality {\n    level: CriticalityLevel!\n    reason: String\n  }\n\n  type Change {\n    message: String!\n    path: String\n    type: String!\n    criticality: Criticality!\n  }\n\n  extend type Query {\n    diff(oldSchema: String!, newSchema: String!): [Change!]\n  }\n`;\n\nconst Query: QueryResolvers.Resolvers = {\n  async diff(_, args) {\n    const [oldSchema, newSchema] = await Promise.all([\n      loadSchema(args.oldSchema),\n      loadSchema(args.newSchema),\n    ]);\n    return diff(oldSchema, newSchema);\n  },\n};\n\nexport const resolvers = {\n  Query,\n};\n"]}