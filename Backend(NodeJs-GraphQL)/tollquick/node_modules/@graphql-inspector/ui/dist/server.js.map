{"version":3,"file":"server.js","sourceRoot":"","sources":["../server.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iCAAmC;AACnC,6BAA0B;AAE1B,SAAsB,KAAK,CAAC,OAAuB;;;;YAC3C,GAAG,GAAG,OAAO,EAAE,CAAC;YAEtB,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,GAAG,EAAE,CAAC;YAErC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;YAE9B,sBAAO,MAAM,CAAC,GAAG,EAAE,OAAO,CAAC,IAAI,CAAC,EAAC;;;CAClC;AARD,sBAQC;AAED,SAAgB,UAAU,CAAC,GAAwB;IACjD,IAAM,IAAI,GAAG,WAAI,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;IAEzC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IAE9B,OAAO,UAAC,IAAI,EAAE,GAAG;QACf,GAAG,CAAC,QAAQ,CAAC,WAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC;AACJ,CAAC;AARD,gCAQC;AAED,SAAS,MAAM,CAAC,GAAwB,EAAE,IAAY;IACpD,OAAO,IAAI,OAAO,CAAO,UAAA,OAAO;QAC9B,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE;YACf,OAAO,EAAE,CAAC;QACZ,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC","sourcesContent":["import * as express from 'express';\nimport {join} from 'path';\n\nexport async function serve(options: {port: number}) {\n  const app = express();\n\n  process.env.PORT = options.port + '';\n\n  app.get('/', middleware(app));\n\n  return listen(app, options.port);\n}\n\nexport function middleware(app: express.Application): express.Handler {\n  const base = join(__dirname, '../build');\n\n  app.use(express.static(base));\n\n  return (_req, res) => {\n    res.sendFile(join(base, 'index.html'));\n  };\n}\n\nfunction listen(app: express.Application, port: number): Promise<void> {\n  return new Promise<void>(resolve => {\n    app.listen(port, () => {\n      resolve();\n    });\n  });\n}\n"]}